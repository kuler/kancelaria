<div id="calendar"></div>
<% content_for :aside do %>
	<hr/>
	<h6>Opcje wyświetlania</h6>
	<div id='calendar-filters'>
		<div class="btn-group calendar-filters" data-toggle="buttons-checkbox">
		  <button data-event-source='<%= activities_path format: :json %>' type="button" class="btn btn-primary">Czynności</button>
		  <button data-event-source='<%= tasks_path format: :json %>' type="button" class="btn btn-primary">Zadania</button>
		</div>
	</div>
<% end %>
<% content_for :scripts do %>
$('#calendar').fullCalendar({	
	buttonText: {
		today:    'dziś',
	    month:    'miesiąc',
	    week:     'tydzień',
	    day:      'dzień'
	},
	allDayText: 'cały dzień',
	dayNames: [
		'Niedziela',
		'Poniedziałek',
		'Wtorek',
		'Środa',
		'Czwartek',
		'Piątek',
		'Sobota'
	],
	dayNamesShort: [
		'niedz.',
		'pon.',
		'wt.',
		'śr.',
		'czw.',
		'pt.',
		'sob.'
	],
	monthNames: [ 
		'Styczeń',
		'Luty',
		'Marzec',
		'Kwiecień',
		'Maj',
		'Czerwiec',
		'Lipiec',
		'Sierpien',
		'Wrzesień',
		'Październik',
		'Listopad',
		'Grudzień'
	],
	monthNamesShort: [
		'Sty',
		'Lut',
		'Mar',
		'Kwi',
		'Maj',
		'Cze',
		'Lip',
		'Sie',
		'Wrz',
		'Paź',
		'Lis',
		'Gru'
	],
	firstDay: 1, // Monday
	axisFormat: 'HH:mm',
	timeFormat: {
		'': 'H:mm',
	    agenda: 'H:mm{ - H:mm}'
	},
	height: $(document).height() - $('.navbar').height() - 60,
	windowResize: function(view) {
		$(this).fullCalendar('option','height', $(document).height() - $('.navbar').height() - 60)
	},
	header: {
		left: 'prev,next today',
		center: 'title',
		right: 'month,agendaWeek,agendaDay'
	},	
	editable: true
})

$('.calendar-filters button').bind('click', function() {
	if(!$(this).hasClass('active')) {
		$('#calendar').fullCalendar('addEventSource', $(this).attr('data-event-source'))
	} else {
		$('#calendar').fullCalendar('removeEventSource', $(this).attr('data-event-source'))
	}	
}).trigger('click')
<% end %>
